<!DOCTYPE html>
<html lang="en" ng-app="obie">
  <head>
      <% include ../templates/head.ejs %>
  </head>

  <body ng-controller="controller" ng-init="init()">

    <% include ../templates/header.ejs %>
    <!-- Insert Body here -->
    <div class="container-fluid">
      <div class="alert alert-success alert-dismissable fade show" role="alert" id="alertSuccess" ng-show="alertSuccess">
        {{successMessage}}
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="offset-md-2 col-md-8 page-header">
        <h2>{{userName}}'s Profile</h2>
      </div>
      <div class="row panel-container">
        <div class="offset-sm-1 col-sm-10 offset-md-0 col-md-3 offset-lg-0 col-lg-3">
          <div class="panel">
            <div class="panel-header">
              My information
            </div>
            <div class="panel-body">
             Name: {{userName}}
              <button class="btn btn-primary" data-toggle="modal" data-target="#nameModal">Edit preferred name</button>
             Email: {{email}}
			</div>
          </div>
        </div>
        <div class="offset-sm-1 col-sm-10 offset-md-0 col-md-6 offset-lg-0 col-lg-6">
          <div class="panel">
            <div class="panel-header">
              My reminders
            </div>
            <div class="panel-body">
              <strong>Birth control reminders</strong>
              <div class="custom-control custom-switch">
                <input type="checkbox" class="custom-control-input" id="bcDaily" ng-model="bcDaily">
                <label class="custom-control-label" for="bcDaily">Birth control daily reminder</label>
              </div>
              <div class="custom-control custom-switch">
                <input type="checkbox" class="custom-control-input" id="bcRefill" ng-model="bcRefill">
                <label class="custom-control-label" for="bcRefill">Birth control refill reminder</label>
              </div>
              <div class="custom-control custom-switch">
                <input type="checkbox" class="custom-control-input" id="bcRenewal" ng-model="bcRenewal">
                <label class="custom-control-label" for="bcRenewal">Birth control renewal reminder</label>
              </div>
              <strong>Yearly appointment reminders</strong>
              <div class="custom-control custom-switch">
                <input type="checkbox" class="custom-control-input" id="apptReminder" ng-model="apptReminder">
                <label class="custom-control-label" for="apptReminder">
                  Remind me to make an appointment every
                  <select ng-model="apptReminderMonth">
                    <option value=1>January</option>
                    <option value=2>February</option>
                    <option value=3>March</option>
                    <option value=4>April</option>
                    <option value=5>May</option>
                    <option value=6>June</option>
                    <option value=7>July</option>
                    <option value=8>August</option>
                    <option value=9>September</option>
                    <option value=10>October</option>
                    <option value=11>November</option>
                    <option value=12>December</option>
                  </select>
                </label>
              </div>
              <button class="btn btn-primary" ng-click="updateReminders()">Save reminder preferences</button>
            </div>
          </div>
        </div>
        <div class="offset-sm-1 col-sm-10 offset-md-0 col-md-3 offset-lg-0 col-lg-3">
          <div class="panel">
            <div class="panel-header">
              My actions
            </div>
            <div class="panel-body">
              <strong>My period</strong>
                <button class="btn btn-primary" data-toggle="modal" data-target="#startPeriodModal" ng-show="!userIsOnPeriod">Record start of period</button>
                <button class="btn btn-primary" data-toggle="modal" data-target="#endPeriodModal" ng-show="userIsOnPeriod">Record end of period</button>
                <button class="btn btn-primary" data-toggle="modal" data-target="#periodSymptomModal" ng-show="userIsOnPeriod">Add period symptoms</button>
              <strong>My perscription</strong>
                <button class="btn btn-primary" data-toggle="modal" data-target="#addPrescriptionModal">Add a prescription</button>
                <button class="btn btn-primary" data-toggle="modal" data-target="#updatePrescriptionModal" ng-click="getUserPrescriptions()">Update a prescription</button>
                <button class="btn btn-primary" data-toggle="modal" data-target="#prescriptionSymptomModal" ng-click="getUserPrescriptions()">Add prescription symptoms</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Modals -->
    <div class="modal fade" id="nameModal">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h3>Change preferred name</h3>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <form class="form-container" method="post">
              <div class="form-group">
                <label>Preferred Name</label>
                <input type="preferredName" class="form-control" name="preferredName" ng-model="preferredName">
              </div>
              <button type="submit" class="btn btn-primary" ng-click="changeName()">Submit</button>
            </form>
          </div>
        </div>
      </div>
    </div>
    <!--  Record start of period modal  -->
    <div class="modal fade" id="startPeriodModal">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h3>Record Period Start</h3>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <form class="form-container">
              <div class="form-group">
                <label>Enter Start Date</label>
                <input type="date" class="form-control" id="startPeriod" ng-model="startPeriod">
              </div>
             <button type="submit" class="btn btn-primary" ng-click="recordStartPeriod()">Submit</button>
            </form>
          </div>
        </div>
      </div>
    </div>
    <!--  Record end of period modal  -->
    <div class="modal fade" id="endPeriodModal">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h3>Record Period End</h3>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <form class="form-container">
              <div class="form-group">
                <label>Enter End Date</label>
                <input type="date" class="form-control" ng-model="endPeriod">
              </div>
             <button type="submit" class="btn btn-primary" ng-click="recordEndPeriod()">Submit</button>
            </form>
          </div>
        </div>
      </div>
    </div>
    <!-- Period Symptoms Modal -->
    <div class="modal fade" id="periodSymptomModal">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h3>Period Symptoms</h3>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <form class="form-container">
              <div class="form-group">
                <label for="symptomDate">Symptom Date</label>
                <input name="symptomDate" type="date" class="form-control" ng-model="symptomDate">
              </div>
              <div class="form-group">
                <span class="btn-group-label">Cramps: </span>
                <div class="symptom-btns">
                  <label>
                    <input type="radio" ng-model="symptomCramps" value="None" checked> None
                  </label>
                  <label>
                    <input type="radio" ng-model="symptomCramps" value="Mild"> Mild
                  </label>
                  <label>
                    <input type="radio" ng-model="symptomCramps" value="Moderate"> Moderate
                  </label>
                  <label>
                    <input type="radio" ng-model="symptomCramps" value="Severe"> Severe
                  </label>
                </div>
              </div>
              <div class="form-group">
                <span class="btn-group-label">Nausea: </span>
                <div class="symptom-btns">
                  <label>
                    <input type="radio" ng-model="symptomNausea" value="None" checked> None
                  </label>
                  <label>
                    <input type="radio" ng-model="symptomNausea" value="Mild"> Mild
                  </label>
                  <label>
                    <input type="radio" ng-model="symptomNausea" value="Moderate"> Moderate
                  </label>
                  <label>
                    <input type="radio" ng-model="symptomNausea" value="Severe"> Severe
                  </label>
                </div>
              </div>
              <div class="form-group">
                <span class="btn-group-label">Headache: </span>
                <div class="symptom-btns">
                  <label>
                    <input type="radio" ng-model="symptomHeadache" value="None" checked> None
                  </label>
                  <label>
                    <input type="radio" ng-model="symptomHeadache" value="Mild"> Mild
                  </label>
                  <label>
                    <input type="radio" ng-model="symptomHeadache" value="Moderate"> Moderate
                  </label>
                  <label>
                    <input type="radio" ng-model="symptomHeadache" value="Severe"> Severe
                  </label>
                </div>
              </div>
              <div class="form-group">
                <span class="btn-group-label">Flow: </span>
                <div class="symptom-btns">
                  <label>
                    <input type="radio" ng-model="symptomFlow" value="None" checked> None
                  </label>
                  <label>
                    <input type="radio" ng-model="symptomFlow" value="Light"> Light
                  </label>
                  <label>
                    <input type="radio" ng-model="symptomFlow" value="Moderate"> Moderate
                  </label>
                  <label>
                    <input type="radio" ng-model="symptomFlow" value="Heavy"> Heavy
                  </label>
                </div>
              </div>
              <div class="form-group">
                <span class="btn-group-label">Lower back pain: </span>
                <div class="symptom-btns">
                  <label>
                    <input type="radio" ng-model="symptomBackPain" value="None" checked> None
                  </label>
                  <label>
                    <input type="radio" ng-model="symptomBackPain" value=""> Mild
                  </label>
                  <label>
                    <input type="radio" ng-model="symptomBackPain" value="Moderate"> Moderate
                  </label>
                  <label>
                    <input type="radio" ng-model="symptomBackPain" value="Severe"> Severe
                  </label>
                </div>
              </div>
              <div class="form-group">
                <span class="btn-group-label">Bloating: </span>
                  <div class="symptom-btns">
                  <label>
                    <input type="radio" ng-model="symptomBloating" value="None" checked> None
                  </label>
                  <label>
                    <input type="radio" ng-model="symptomBloating" value=""> Mild
                  </label>
                  <label>
                    <input type="radio" ng-model="symptomBloating" value="Moderate"> Moderate
                  </label>
                  <label>
                    <input type="radio" ng-model="symptomBloating" value="Severe"> Severe
                  </label>
                </div>
              </div>
              <div class="form-group">
                <label for="notes">Notes:</label>
                <textarea ng-model="notes" class="form-control"></textarea>
              </div>
             <button type="submit" class="btn btn-primary" ng-click="recordPeriodSymptoms()">Submit</button>
            </form>
          </div>
        </div>
      </div>
    </div>
    <!-- Add Prescription Modal-->
    <div class="modal fade" id="addPrescriptionModal">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h3>Add a Presciption</h3>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <form class="form-container">
              <div class="form-group">
                <label>Prescription Name:</label>
                <select ng-model="newPrescriptionName" class="form-control">
                  <option ng-value="OTHER">OTHER</option>
                  <option ng-repeat="prescription in prescriptionList" ng-value="prescription.name">{{prescription.name}}</option>
                </select>
              </div>
              <div class="form-group">
                <label>Number of Refills:</label>
                <input type="number" class="form-control" ng-model="newPrescriptionRefills">
              </div>
              <div class="form-group">
                <label>Days Supply:</label>
                <input type="number" class="form-control" ng-model="newPrescriptionDaysSupply">
              </div>
              <div class="form-group">
                <label>Date of Last Refill:</label>
                <input type="date" class="form-control" ng-model="newPrescriptionRefillDate">
              </div>
              <div class="form-group">
                <label>Expiration Date:</label>
                <input type="date" class="form-control" ng-model="newPrescriptionExpiration">
              </div>
              <div class="form-group">
                <label>Start Date:</label>
                <input type="date" class="form-control" ng-model="newPrescriptionStart">
              </div>
              <div class="form-group">
                <label>Prescription Status:</label>
                <select ng-model="newPrescriptionStatus"  class="form-control">
                  <option ng-value="Active">Active</option>
                  <option ng-value="Inactive">Inactive</option>
                </select>
              </div>
              <div class="form-group">
                <label>Notes: </label>
                <textarea class="form-control" ng-model="newPrescriptionNotes" placeholder="Generic name, alternate names, etc."></textarea>
              </div>
              <button type="submit" class="btn btn-primary" ng-click="addPrescription()">Submit</button>
            </form>
          </div>
        </div>
      </div>
    </div>
    <!--  Update Prescription Modal  -->
    <div class="modal fade" id="updatePrescriptionModal">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h3>Update a Presciption</h3>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <form class="form-container">
              <div class="form-group">
                <label>Prescription Name:</label>
                <select ng-model="prescriptionName" class="form-control" ng-change="loadPrescription()">
                  <option ng-repeat="prescription in userPrescriptions" ng-value="prescription.prescription.id">{{prescription.prescription.name}}</option>
                </select>
              </div>
              <div class="form-group">
                <label>Number of Refills:</label>
                <input type="number" class="form-control" ng-model="prescriptionRefills">
              </div>
              <div class="form-group">
                <label>Days Supply:</label>
                <input type="number" class="form-control" ng-model="prescriptionDaysSupply">
              </div>
              <div class="form-group">
                <label>Date of Last Refill:</label>
                <input type="date" class="form-control" ng-model="prescriptionRefillDate">
              </div>
              <div class="form-group">
                <label>Expiration Date:</label>
                <input type="date" class="form-control" ng-model="prescriptionExpiration">
              </div>
              <div class="form-group">
                <label>Start Date:</label>
                <input type="date" class="form-control" ng-model="prescriptionStart" ng-disabled="editingPrescription">
              </div>
              <div class="form-group">
                <label>Prescription Status:</label>
                <select class="form-control">
                  <option ng-model="prescriptionStatus" ng-value=true>Active</option>
                  <option ng-model="prescriptionStatus" ng-value=false>Inactive</option>
                </select>
              </div>
              <div class="form-group">
                <label>Notes: </label>
                <textarea class="form-control" ng-model="prescriptionNotes" placeholder="Generic name, alternate names, etc."></textarea>
              </div>
              <button type="submit" class="btn btn-primary btn-inline" ng-click="updatePrescription()">Submit</button>
              <button type="submit" class="btn btn-danger btn-inline" ng-click="deletePrescription()">Delete</button>
            </form>
          </div>
        </div>
      </div>
    </div>
    <!-- Prescription Symptoms Modal-->
    <div class="modal fade" id="prescriptionSymptomModal">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h3>Prescription Symptoms</h3>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <form class="form-container">
              <div class="form-group">
                <label>Prescription Name:</label>
                <select ng-model="prescriptionName" class="form-control" ng-change="loadPrescriptionDate()">
                  <option ng-repeat="prescription in userPrescriptions" ng-value="prescription.prescription.id">{{prescription.prescription.name}}</option>
                </select>
              </div>
              <div class="form-group">
                <label for="symptomDate">Symptom Date</label>
                <input name="symptomDate" type="date" class="form-control" ng-model="symptomDate">
              </div>
              <div class="form-group">
                <span class="btn-group-label">Spotting: </span>
                <div class="symptom-btns">
                  <label>
                    <input type="radio" ng-model="symptomSpotting" value="None" checked> None
                  </label>
                  <label>
                    <input type="radio" ng-model="symptomSpotting" value="Light"> Light
                  </label>
                  <label>
                    <input type="radio" ng-model="symptomSpotting" value="Moderate"> Moderate
                  </label>
                  <label>
                    <input type="radio" ng-model="symptomSpotting" value="Heavy"> Heavy
                  </label>
                </div>
              </div>
              <div class="form-group">
                <span class="btn-group-label">Nausea: </span>
                <div class="symptom-btns">
                  <label>
                    <input type="radio" ng-model="symptomNausea" value="None" checked> None
                  </label>
                  <label>
                    <input type="radio" ng-model="symptomNausea" value="Mild"> Mild
                  </label>
                  <label>
                    <input type="radio" ng-model="symptomNausea" value="Moderate"> Moderate
                  </label>
                  <label>
                    <input type="radio" ng-model="symptomNausea" value="Severe"> Severe
                  </label>
                </div>
              </div>
              <div class="form-group">
                <span class="btn-group-label">Headache: </span>
                <div class="symptom-btns">
                  <label>
                    <input type="radio" ng-model="symptomHeadache" value="None" checked> None
                  </label>
                  <label>
                    <input type="radio" ng-model="symptomHeadache" value="Mild"> Mild
                  </label>
                  <label>
                    <input type="radio" ng-model="symptomHeadache" value="Moderate"> Moderate
                  </label>
                  <label>
                    <input type="radio" ng-model="symptomHeadache" value="Severe"> Severe
                  </label>
                </div>
              </div>
              <div class="form-group">
                <span class="btn-group-label">Sore Breasts: </span>
                <div class="symptom-btns">
                  <label>
                    <input type="radio" ng-model="symptomSoreBreasts" value="None" checked> None
                  </label>
                  <label>
                    <input type="radio" ng-model="symptomSoreBreasts" value="Mild"> Mild
                  </label>
                  <label>
                    <input type="radio" ng-model="symptomSoreBreasts" value="Moderate"> Moderate
                  </label>
                  <label>
                    <input type="radio" ng-model="symptomSoreBreasts" value="Severe"> Severe
                  </label>
                </div>
              </div>
              <div class="form-group">
                <span class="btn-group-label">Mood Swings: </span>
                <div class="symptom-btns">
                  <label>
                    <input type="radio" ng-model="symptomMoodSwings" value="None" checked> None
                  </label>
                  <label>
                    <input type="radio" ng-model="symptomMoodSwings" value="Mild"> Mild
                  </label>
                  <label>
                    <input type="radio" ng-model="symptomMoodSwings" value="Moderate"> Moderate
                  </label>
                  <label>
                    <input type="radio" ng-model="symptomMoodSwings" value="Severe"> Severe
                  </label>
                </div>
              </div>
              <div class="form-group">
                <label for="notes">Notes:</label>
                <textarea ng-model="notes" class="form-control"></textarea>
              </div>
             <button type="submit" class="btn btn-primary" ng-click="recordPrescriptionSymptoms()">Submit</button>
            </form>
          </div>
        </div>
      </div>
    </div>
    <% include ../templates/footer.ejs %>
    <script src="resources/js/profile.js"></script>
  </body>
</html>
